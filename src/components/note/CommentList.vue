<template>
  <div class="p-[16px]" @scroll="handleScroll" ref="commentListRef">
    <!-- 只在有评论时显示评论数量 -->
    <div v-if="comments && comments.length > 0" class="text-[14px] ml-[8px] mb-[12px] text-gray-500">
      共 {{ total }} 条评论
    </div>
    
    <!-- 评论列表 -->
    <div>
      <CommentItem 
        v-for="comment in comments" 
        :key="comment.commentId" 
        :comment="comment"
        @reply="$emit('reply', $event)"
        @expand-replies="$emit('expand-replies', $event)"
        @like="$emit('like', $event)"
      />
    </div>

    <!-- 空评论状态 -->
    <div v-if="comments === null || comments.length === 0" class="flex flex-col items-center py-[20px] gap-[20px] mb-20">
      <img 
        src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAAAXNSR0IArs4c6QAAIABJREFUeF7tXW1yHLfRBmYoqmTHJZGiFKui5CVzgYjZXVbpl8UTWDqBxRNYPIHJE1g6gakThDpB6F+pIocl5gCJ15EdxTK/XC4nEmd38G6vsfZyd4AB5msHM89UqewqAhjg6d5nuhuNBmd4gAAQAAKOIMAdmSemCQSAABBgICwoARAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgAEAACziAAwnJGVJgoEAACICzoABAAAs4gAMJyRlSYKBAAAiAs6AAQAALOIADCckZUmCgQAAIgLOgA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" 
        class="w-[100px] h-[100px]"
      />
      <div class="flex items-center justify-center text-[14px]">
        <div class="text-gray-500">这是一片荒地</div>
        <div 
          class="text-[#13386c] ml-[4px] cursor-pointer"
          @click="onClickComment"
        >
          点击评论
        </div>
      </div>
    </div>

    <!-- 到底了提示 -->
    <div v-if="comments && comments.length > 0 && !hasMore" class="flex flex-col items-center end-container">
        - THE END - 
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, onBeforeUnmount } from 'vue'
import CommentItem from './CommentItem.vue'

const props = defineProps({
  comments: {
    type: Array,
    default: () => []
  },
  total: {
    type: [Number, String],
    default: '0'
  },
  hasMore: {
    type: Boolean,
    default: false
  },
  moreCount: {
    type: Number,
    default: 0
  }
})

const emit = defineEmits(['load-more', 'click-comment', 'reply'])
const commentListRef = ref(null)

// 处理滚动事件
const handleScroll = (e) => {
  if (!props.comments.length || !props.hasMore) return

  const container = e.target
  const scrollTop = container.scrollTop
  const scrollHeight = container.scrollHeight
  const clientHeight = container.clientHeight

  // 当滚动到距离底部 50px 时触发加载
  if (scrollHeight - scrollTop - clientHeight < 50) {
    console.log('已经滚动到最后一条评论，准备加载下一页数据...')
    emit('load-more')
  }
}

// 组件挂载时添加滚动监听
onMounted(() => {
  if (commentListRef.value) {
    commentListRef.value.addEventListener('scroll', handleScroll)
  }
})

// 组件卸载时移除滚动监听
onBeforeUnmount(() => {
  if (commentListRef.value) {
    commentListRef.value.removeEventListener('scroll', handleScroll)
  }
})

// 点击评论处理
const onClickComment = () => {
  console.log('点击评论')
  emit('click-comment')
}
</script> 

<style scoped>
.end-container {
  margin-top: 24px;
  margin-bottom: 24px;
  font-size: 12px;
  line-height: 16px;
  color: rgba(51, 51, 51, 0.6);
}

</style>